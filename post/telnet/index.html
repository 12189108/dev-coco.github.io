<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>telnet | Raz1ner</title>
  <link rel="shortcut icon" href="https://dev-coco.github.io/favicon.ico?v=1656715813996">
  <link rel="stylesheet" href="https://dev-coco.github.io/styles/main.css">
  <script src="https://dev-coco.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script data-ad-client="ca-pub-6960947409660270" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
  <div class="main">
    <div class="header">
      <div class="nav">
        <div class="logo">
          <a href="https://dev-coco.github.io">
            <img class="avatar" src="https://dev-coco.github.io/images/avatar.png?v=1656715813996" alt="">
          </a>
          <div class="site-title">
            <h1>Raz1ner</h1>
          </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
          <ul>
            <li>
              <a href="/" class="menu">首页</a>
            </li>
            <li>
              <a href="/Featured-Software.html" class="menu">软件</a>
            </li>
            <li>
              <a href="/Online-Tools" class="menu">在线工具</a>
            </li>
            <li>
              <a href="/post/Linux-Command" class="menu">Linux命令</a>
            </li>
            <li>
              <a href="/Excel" class="menu">Excel教程</a>
            </li>
            <li>
              <a href="/post/Terms-and-Privacy" class="menu">隐私与条款</a>
            </li>
          </ul>
        </div>
        <form id="gridea-search-form" action="https://dev-coco.github.io/search/" class="search">
          <input type="search" name="q" class="search-box">
          <span class="search-button">
            <span class="search-icon"></span>
          </span>
        </form>
      </div>
    </div>
    <script>
      document.getElementsByClassName('search-button')[0].addEventListener('click', function () {
        document.getElementById('gridea-search-form').classList.toggle('open');
      })
    </script>

    <div id="main-content" class="post-detail main-container">
      <!-- left -->
      <div id="content" class="main-container-left">
        <article class="post i-card">
        <h2 class="post-title">telnet</h2>
        <div class="post-info">
          <time class="post-time">2022-02-03 / 5 min read</time>
            <a href="https://dev-coco.github.io/tag/linux-command/" class="post-tag i-tag i-tag-error">#Linux命令</a>
        </div>
          <div class="post-content">
            <p>登录远程主机和管理 (测试 ip 端口是否连通)。</p>
<!-- more -->
<h2 id="补充说明">补充说明</h2>
<p>telnet 命令用于登录远程主机，对远程主机进行管理。telnet 因为采用明文传送报文，安全性不好，很多 Linux 服务器都不开放 telnet 服务，而改用更安全的 ssh 方式了。但仍然有很多别的系统可能采用了 telnet 方式来提供远程登录，因此弄清楚 telnet 客户端的使用方式仍是很有必要的。</p>
<h2 id="语法">语法</h2>
<pre><code class="language-Shell">telnet (选项) (参数)
</code></pre>
<h2 id="选项">选项</h2>
<pre><code class="language-Shell">-8：允许使用 8 位字符资料，包括输入与输出；
-a：尝试自动登入远端系统；
-b&lt;主机别名&gt;：使用别名指定远端主机名称；
-c：不读取用户专属目录里的.telnetrc 文件；
-d：启动排错模式；
-e&lt;脱离字符&gt;：设置脱离字符；
-E：滤除脱离字符；
-f：此参数的效果和指定&quot;-F&quot;参数相同；
-F：使用 Kerberos V5 认证时，加上此参数可把本地主机的认证数据上传到远端主机；
-k&lt;域名&gt;：使用 Kerberos 认证时，加上此参数让远端主机采用指定的领域名，而非该主机的域名；
-K：不自动登入远端主机；
-l&lt;用户名称&gt;：指定要登入远端主机的用户名称；
-L：允许输出 8 位字符资料；
-n&lt;记录文件&gt;：指定文件记录相关信息；
-r：使用类似 rlogin 指令的用户界面；
-S&lt;服务类型&gt;：设置 telnet 连线所需的 ip TOS 信息；
-x：假设主机有支持数据加密的功能，就使用它；
-X&lt;认证形态&gt;：关闭指定的认证形态。
</code></pre>
<h2 id="参数">参数</h2>
<ul>
<li>
<p>远程主机：指定要登录进行管理的远程主机；</p>
</li>
<li>
<p>端口：指定 TELNET 协议使用的端口号。</p>
</li>
</ul>
<h2 id="实例">实例</h2>
<pre><code class="language-Shell">$ telnet 192.168.2.10
Trying 192.168.2.10...
Connected to 192.168.2.10 (192.168.2.10).
Escape character is '^]'.

    localhost (Linux release 2.6.18-274.18.1.el5 #1 SMP Thu Feb 9 12:45:44 EST 2012) (1)

login: root
Password:
Login incorrect
</code></pre>
<p>一般情况下不允许 root 从远程登录，可以先用普通账号登录，然后再用 su -切到 root 用户。</p>
<pre><code class="language-Shell">$ telnet 192.168.188.132
Trying 192.168.188.132...
telnet: connect to address 192.168.188.132: Connection refused
telnet: Unable to connect to remote host
</code></pre>
<p>处理这种情况方法：</p>
<ul>
<li>
<p>确认 ip 地址是否正确？</p>
</li>
<li>
<p>确认 ip 地址对应的主机是否已经开机？</p>
</li>
<li>
<p>如果主机已经启动，确认路由设置是否设置正确？（使用 route 命令查看）</p>
</li>
<li>
<p>如果主机已经启动，确认主机上是否开启了 telnet 服务？（使用 netstat 命令查看，TCP 的 23 端口是否有 LISTEN 状态的行）</p>
</li>
<li>
<p>如果主机已经启动 telnet 服务，确认防火墙是否放开了 23 端口的访问？（使用 iptables-save 查看）</p>
</li>
</ul>
<p>启动 telnet 服务</p>
<pre><code class="language-Shell">service xinetd restart
</code></pre>
<p>配置参数，通常的配置如下：</p>
<pre><code class="language-Shell">service telnet
{
    disable = no #启用
    flags = REUSE #socket 可重用
    socket_type = stream #连接方式为 TCP
    wait = no #为每个请求启动一个进程
    user = root #启动服务的用户为 root
    server = /usr/sbin/in.telnetd #要激活的进程
    log_on_failure += USERID #登录失败时记录登录用户名
}
</code></pre>
<p>如果要配置允许登录的客户端列表，加入</p>
<pre><code class="language-Shell">only_from = 192.168.0.2 #只允许 192.168.0.2 登录
</code></pre>
<p>如果要配置禁止登录的客户端列表，加入</p>
<pre><code class="language-Shell">no_access = 192.168.0.{2,3,4} #禁止 192.168.0.2、192.168.0.3、192.168.0.4 登录
</code></pre>
<p>如果要设置开放时段，加入</p>
<pre><code class="language-Shell">access_times = 9:00-12:00 13:00-17:00 # 每天只有这两个时段开放服务（我们的上班时间：P）
</code></pre>
<p>如果你有两个 IP 地址，一个是私网的 IP 地址如 192.168.0.2，一个是公网的 IP 地址如 218.75.74.83，如果你希望用户只能从私网来登录 telnet 服务，那么加入</p>
<pre><code class="language-Shell">bind = 192.168.0.2
</code></pre>
<p>各配置项具体的含义和语法可参考 xined 配置文件属性说明（man xinetd.conf）</p>
<p>配置端口，修改 services 文件：</p>
<pre><code class="language-Shell"># vi /etc/services
</code></pre>
<p>找到以下两句</p>
<pre><code class="language-Shell">telnet 23/tcp
telnet 23/udp
</code></pre>
<p>如果前面有#字符，就去掉它。telnet 的默认端口是 23，这个端口也是黑客端口扫描的主要对象，因此最好将这个端口修改掉，修改的方法很简单，就是将 23 这个数字修改掉，改成大一点的数字，比如 61123。注意，1024 以下的端口号是 internet 保留的端口号，因此最好不要用，还应该注意不要与其它服务的端口冲突。</p>
<p>启动服务：</p>
<pre><code class="language-Shell">service xinetd restart
</code></pre>

          </div>
        </article>
        <div class="next-post">
          <div class="next">下一篇</div>
          <a href="https://dev-coco.github.io/post/nano/">
            <h3 class="post-title">nano</h3>
          </a>
        </div>
        <div id="disqus_thread"></div>
        <div id="gitalk-container"></div>
      </div>
      <!-- middle -->
      <div class="main-container-middle"></div>
      <!-- right -->
      <div id="sidebar" class="main-container-right">
      <!-- toc -->
      <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
          <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E">补充说明</a></li>
<li><a href="#%E8%AF%AD%E6%B3%95">语法</a></li>
<li><a href="#%E9%80%89%E9%A1%B9">选项</a></li>
<li><a href="#%E5%8F%82%E6%95%B0">参数</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B">实例</a></li>
</ul>
</li>
</ul>

          </div>
          <script>
            function locateCatelogList() {
              /*获取文章目录集合,可通过:header过滤器*/
              var alis = $('.post-content :header');
              /*获取侧边栏目录列表集合**/
              var sidebar_alis = $('.markdownIt-TOC a');
              /*获取滚动条到顶部的距离*/
              var scroll_height = $(window).scrollTop();
              for (var i = 0; i < alis.length; i++) {
                /*获取锚点集合中的元素分别到顶点的距离*/
                var a_height = $(alis[i]).offset().top;
                if (a_height < scroll_height) {
                  /*高亮显示*/
                  sidebar_alis.removeClass('on');
                  $(sidebar_alis[i]).addClass('on');
                }
              }
            }
            $(function() {
              /*绑定滚动事件 */
              $(window).bind('scroll', locateCatelogList);
              });
          </script>
        </div>
      <div class="notice-card i-card ">
        <div class="notice-title i-card-title">公告</div>
        <div class="notice-content">博客新增搜索文章功能。<br>输入关键词后按回车键即可。</div>
      </div>
      <div class="notice-card i-card "><div class="notice-title i-card-title"><a href="/tags/">标签</a></div>
        <div class="notice-content">
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/macos/">macOS</a>
          <a class="tags-tag i-tag i-tag-other_3" href="https://dev-coco.github.io/tag/google-script/">Google 脚本</a>
          <a class="tags-tag i-tag i-tag-other_4" href="https://dev-coco.github.io/tag/software/">软件</a>
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/excel/">Excel</a>
          <a class="tags-tag i-tag i-tag-warning" href="https://dev-coco.github.io/tag/whatsapp/">WhatsApp</a>
          <a class="tags-tag i-tag i-tag-banana" href="https://dev-coco.github.io/tag/other/">其它</a>
          <a class="tags-tag i-tag i-tag-info" href="https://dev-coco.github.io/tag/facebook/">Facebook</a>
          <a class="tags-tag i-tag i-tag-banana" href="https://dev-coco.github.io/tag/windows/">Windows</a>
          <a class="tags-tag i-tag i-tag-primary" href="https://dev-coco.github.io/tag/ios/">iOS</a>
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/shell/">Shell</a>
          <a class="tags-tag i-tag i-tag-other_1" href="https://dev-coco.github.io/tag/linux-command/">Linux命令</a>
        </div>
      </div>
      </div>
    </div>
    <div class="site-footer">
    <img style="vertical-align:middle;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdev-coco.github.io&count_bg=%2310C1F9&title_bg=%23555555&icon=html5.svg&icon_color=%23E7E7E7&title=%E8%AE%BF%E9%97%AE%E4%BA%BA%E6%95%B0&edge_flat=false"> | <span>Copyright © 2020-2022 Raz1ner - All Rights Reserved.</span> | <a class="rss" href="https://dev-coco.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
  <script>
    $('#sidebar').stickySidebar({
    topSpacing: 80,
    // bottomSpacing: 60
    });
  </script>
  
</body>
</html>