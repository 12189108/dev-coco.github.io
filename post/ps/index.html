<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ps | Raz1ner</title>
  <link rel="shortcut icon" href="https://dev-coco.github.io/favicon.ico?v=1666838133513">
  <link rel="stylesheet" href="https://dev-coco.github.io/styles/main.css">
  <script src="https://dev-coco.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script data-ad-client="ca-pub-6960947409660270" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
  <div class="main">
    <div class="header">
      <div class="nav">
        <div class="logo">
          <a href="https://dev-coco.github.io">
            <img class="avatar" src="https://dev-coco.github.io/images/avatar.png?v=1666838133513" alt="">
          </a>
          <div class="site-title">
            <h1>Raz1ner</h1>
          </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
          <ul>
            <li>
              <a href="/" class="menu">首页</a>
            </li>
            <li>
              <a href="/Featured-Software.html" class="menu">软件</a>
            </li>
            <li>
              <a href="/Online-Tools" class="menu">在线工具</a>
            </li>
            <li>
              <a href="/post/Linux-Command" class="menu">Linux命令</a>
            </li>
            <li>
              <a href="/Excel" class="menu">Excel教程</a>
            </li>
            <li>
              <a href="/post/Terms-and-Privacy" class="menu">隐私与条款</a>
            </li>
          </ul>
        </div>
        <form id="gridea-search-form" action="https://dev-coco.github.io/search/" class="search">
          <input type="search" name="q" class="search-box">
          <span class="search-button">
            <span class="search-icon"></span>
          </span>
        </form>
      </div>
    </div>
    <script>
      document.getElementsByClassName('search-button')[0].addEventListener('click', function () {
        document.getElementById('gridea-search-form').classList.toggle('open');
      })
    </script>

    <div id="main-content" class="post-detail main-container">
      <!-- left -->
      <div id="content" class="main-container-left">
        <article class="post i-card">
        <h2 class="post-title">ps</h2>
        <div class="post-info">
          <time class="post-time">2022-02-03 / 11 min read</time>
            <a href="https://dev-coco.github.io/tag/linux-command/" class="post-tag i-tag i-tag-other_2">#Linux命令</a>
        </div>
          <div class="post-content">
            <p><a href="https://dev-coco.github.io/Excel/">Excel 教程 </a></p>
<p>报告当前系统的进程状态。</p>
<!-- more -->
<h2 id="补充说明">补充说明</h2>
<p>ps 命令用于报告当前系统的进程状态。可以搭配 kill 指令随时中断、删除不必要的程序。ps 命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。</p>
<h2 id="语法">语法</h2>
<pre><code class="language-Shell">ps (选项)
</code></pre>
<h2 id="选项">选项</h2>
<pre><code class="language-Shell">-a：显示所有终端机下执行的程序，除了阶段作业领导者之外。
a：显示现行终端机下的所有程序，包括其他用户的程序。
-A：显示所有程序。
-c：显示 CLS 和 PRI 栏位。
c：列出程序时，显示每个程序真正的指令名称，而不包含路径，选项或常驻服务的标示。
-C&lt;指令名称&gt;：指定执行指令的名称，并列出该指令的程序的状况。
-d：显示所有程序，但不包括阶段作业领导者的程序。
-e：此选项的效果和指定&quot;A&quot;选项相同。
e：列出程序时，显示每个程序所使用的环境变量。
-f：显示 UID,PPIP,C 与 STIME 栏位。
f：用 ASCII 字符显示树状结构，表达程序间的相互关系。
-g&lt;群组名称&gt;：此选项的效果和指定&quot;-G&quot;选项相同，当亦能使用阶段作业领导者的名称来指定。
g：显示现行终端机下的所有程序，包括群组领导者的程序。
-G&lt;群组识别码&gt;：列出属于该群组的程序的状况，也可使用群组名称来指定。
h：不显示标题列。
-H：显示树状结构，表示程序间的相互关系。
-j 或 j：采用工作控制的格式显示程序状况。
-l 或 l：采用详细的格式来显示程序状况。
L：列出栏位的相关信息。
-m 或 m：显示所有的执行绪。
n：以数字来表示 USER 和 WCHAN 栏位。
-N：显示所有的程序，除了执行 ps 指令终端机下的程序之外。
-p&lt;程序识别码&gt;：指定程序识别码，并列出该程序的状况。
p&lt;程序识别码&gt;：此选项的效果和指定&quot;-p&quot;选项相同，只在列表格式方面稍有差异。
r：只列出现行终端机正在执行中的程序。
-s&lt;阶段作业&gt;：指定阶段作业的程序识别码，并列出隶属该阶段作业的程序的状况。
s：采用程序信号的格式显示程序状况。
S：列出程序时，包括已中断的子程序资料。
-t&lt;终端机编号&gt;：指定终端机编号，并列出属于该终端机的程序的状况。
t&lt;终端机编号&gt;：此选项的效果和指定&quot;-t&quot;选项相同，只在列表格式方面稍有差异。
-T：显示现行终端机下的所有程序。
-u&lt;用户识别码&gt;：此选项的效果和指定&quot;-U&quot;选项相同。
u：以用户为主的格式来显示程序状况。
-U&lt;用户识别码&gt;：列出属于该用户的程序的状况，也可使用用户名称来指定。
U&lt;用户名称&gt;：列出属于该用户的程序的状况。
v：采用虚拟内存的格式显示程序状况。
-V 或 V：显示版本信息。
-w 或 w：采用宽阔的格式来显示程序状况。
x：显示所有程序，不以终端机来区分。
X：采用旧式的 Linux i386 登陆格式显示程序状况。
-y：配合选项&quot;-l&quot;使用时，不显示 F(flag) 栏位，并以 RSS 栏位取代 ADDR 栏位　。
-&lt;程序识别码&gt;：此选项的效果和指定&quot;p&quot;选项相同。
--cols&lt;每列字符数&gt;：设置每列的最大字符数。
--columns&lt;每列字符数&gt;：此选项的效果和指定&quot;--cols&quot;选项相同。
--cumulative：此选项的效果和指定&quot;S&quot;选项相同。
--deselect：此选项的效果和指定&quot;-N&quot;选项相同。
--forest：此选项的效果和指定&quot;f&quot;选项相同。
--headers：重复显示标题列。
--help：在线帮助。
--info：显示排错信息。
--lines&lt;显示列数&gt;：设置显示画面的列数。
--no-headers：此选项的效果和指定&quot;h&quot;选项相同，只在列表格式方面稍有差异。
--group&lt;群组名称&gt;：此选项的效果和指定&quot;-G&quot;选项相同。
--Group&lt;群组识别码&gt;：此选项的效果和指定&quot;-G&quot;选项相同。
--pid&lt;程序识别码&gt;：此选项的效果和指定&quot;-p&quot;选项相同。
--rows&lt;显示列数&gt;：此选项的效果和指定&quot;--lines&quot;选项相同。
--sid&lt;阶段作业&gt;：此选项的效果和指定&quot;-s&quot;选项相同。
--tty&lt;终端机编号&gt;：此选项的效果和指定&quot;-t&quot;选项相同。
--user&lt;用户名称&gt;：此选项的效果和指定&quot;-U&quot;选项相同。
--User&lt;用户识别码&gt;：此选项的效果和指定&quot;-U&quot;选项相同。
--version：此选项的效果和指定&quot;-V&quot;选项相同。
--widty&lt;每列字符数&gt;：此选项的效果和指定&quot;-cols&quot;选项相同。
</code></pre>
<p>由于 ps 命令能够支持的系统类型相当的多，所以选项多的离谱！</p>
<h2 id="实例">实例</h2>
<pre><code class="language-Shell">ps axo pid,comm,pcpu # 查看进程的 PID、名称以及 CPU 占用率
ps aux | sort -rnk 4 # 按内存资源的使用量对进程进行排序
ps aux | sort -nk 3  # 按 CPU 资源的使用量对进程进行排序
ps -A # 显示所有进程信息
ps -u root # 显示指定用户信息
ps -efL # 查看线程数
ps -e -o &quot;%C : %p :%z : %a&quot;|sort -k5 -nr # 查看进程并按内存使用大小排列
ps -ef # 显示所有进程信息，连同命令行
ps -ef | grep ssh # ps 与 grep 常用组合用法，查找特定进程
ps -C nginx # 通过名字或命令搜索进程
ps aux --sort=-pcpu,+pmem # CPU 或者内存进行排序,-降序，+升序
ps -f --forest -C nginx # 用树的风格显示进程的层次关系
ps -o pid,uname,comm -C nginx # 显示一个父进程的子进程
ps -e -o pid,uname=USERNAME,pcpu=CPU_USAGE,pmem,comm # 重定义标签
ps -e -o pid,comm,etime # 显示进程运行的时间
ps -aux | grep named # 查看 named 进程详细信息
ps -o command -p 91730 | sed -n 2p # 通过进程 id 获取服务名称
</code></pre>
<p>将目前属于您自己这次登入的 PID 与相关信息列示出来</p>
<pre><code class="language-Shell">ps -l
#  UID   PID  PPID        F CPU PRI NI       SZ    RSS WCHAN     S             ADDR TTY           TIME CMD
#  501   566   559     4006   0  31  0  4317620    228 -      Ss                  0 ttys001    0:00.05 /App...cOS/iTerm2 --server /usr/bin/login -fpl kenny /Ap...s/MacOS/iTerm2 --launch_shel
#  501   592   577     4006   0  31  0  4297048     52 -      S                   0 ttys001    0:00.63 -zsh
</code></pre>
<ul>
<li>
<p>F 代表这个程序的旗标 (flag)， 4 代表使用者为 super user</p>
</li>
<li>
<p>S 代表这个程序的状态 (STAT)，关于各 STAT 的意义将在内文介绍</p>
</li>
<li>
<p>UID 程序被该 UID 所拥有</p>
</li>
<li>
<p>PID 就是这个程序的 ID ！</p>
</li>
<li>
<p>PPID 则是其上级父程序的 ID</p>
</li>
<li>
<p>C CPU 使用的资源百分比</p>
</li>
<li>
<p>PRI 这个是 Priority (优先执行序) 的缩写，详细后面介绍</p>
</li>
<li>
<p>NI 这个是 Nice 值，在下一小节我们会持续介绍</p>
</li>
<li>
<p>ADDR 这个是 kernel function，指出该程序在内存的那个部分。如果是个 running 的程序，一般就是 &quot;-&quot;</p>
</li>
<li>
<p>SZ 使用掉的内存大小</p>
</li>
<li>
<p>WCHAN 目前这个程序是否正在运作当中，若为 - 表示正在运作</p>
</li>
<li>
<p>TTY 登入者的终端机位置</p>
</li>
<li>
<p>TIME 使用掉的 CPU 时间。</p>
</li>
<li>
<p>CMD 所下达的指令为何</p>
</li>
</ul>
<blockquote>
在预设的情况下， `ps` 仅会列出与目前所在的 `bash shell` 有关的 `PID` 而已，所以， 当我使用 `ps -l` 的时候，只有三个 PID。
</blockquote>
列出目前所有的正在内存当中的程序
<pre><code class="language-Shell">ps aux

# USER               PID  %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND
# kenny             6155  21.3  1.7  7969944 284912   ??  S    二 03 下午 199:14.14 /Appl...OS/WeChat
# kenny              559  20.4  0.8  4963740 138176   ??  S    二 03 下午  33:28.27 /Appl...S/iTerm2
# _windowserver      187  18.0  0.6  7005748  95884   ??  Ss   二 03 下午 288:44.97 /Syst...Light.WindowServer -daemon
# kenny             1408  10.7  2.1  5838592 347348   ??  S    二 03 下午 138:51.63 /Appl...nts/MacOS/Google Chrome
# kenny              327   5.8  0.5  5771984  79452   ??  S    二 03 下午   2:51.58 /Syst...pp/Contents/MacOS/Finder
</code></pre>
<ul>
<li>
<p>USER：该 process 属于那个使用者账号的</p>
</li>
<li>
<p>PID ：该 process 的号码</p>
</li>
<li>
<p>%CPU：该 process 使用掉的 CPU 资源百分比</p>
</li>
<li>
<p>%MEM：该 process 所占用的物理内存百分比</p>
</li>
<li>
<p>VSZ ：该 process 使用掉的虚拟内存量 (Kbytes)</p>
</li>
<li>
<p>RSS ：该 process 占用的固定的内存量 (Kbytes)</p>
</li>
<li>
<p>TTY ：该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。</p>
</li>
<li>
<p>STAT：该程序目前的状态，主要的状态有</p>
</li>
<li>
<p>R ：该程序目前正在运作，或者是可被运作</p>
</li>
<li>
<p>S ：该程序目前正在睡眠当中 (可说是 idle 状态)，但可被某些讯号 (signal) 唤醒。</p>
</li>
<li>
<p>T ：该程序目前正在侦测或者是停止了</p>
</li>
<li>
<p>Z ：该程序应该已经终止，但是其父程序却无法正常的终止他，造成 zombie (疆尸) 程序的状态</p>
</li>
<li>
<p>START：该 process 被触发启动的时间</p>
</li>
<li>
<p>TIME ：该 process 实际使用 CPU 运作的时间</p>
</li>
<li>
<p>COMMAND：该程序的实际指令</p>
</li>
</ul>
<p>列出类似程序树的程序显示</p>
<pre><code class="language-Shell">ps -axjf

# USER               PID  PPID  PGID   SESS JOBC STAT   TT       TIME COMMAND            UID   C STIME   TTY
# root                 1     0     1      0    0 Ss     ??   10:51.90 /sbin/launchd        0   0 二 03 下午 ??
# root                50     1    50      0    0 Ss     ??    0:10.07 /usr/sbin/syslog     0   0 二 03 下午 ??
# root                51     1    51      0    0 Ss     ??    0:29.90 /usr/libexec/Use     0   0 二 03 下午 ??
</code></pre>
<p>找出与 cron 与 syslog 这两个服务有关的 PID 号码</p>
<pre><code class="language-Shell">ps aux | egrep '(cron|syslog)'

# root                50   0.0  0.0  4305532   1284   ??  Ss   二 03 下午   0:10.08 /usr/sbin/syslogd
# kenny            90167   0.0  0.0  4258468    184 s007  R+    9:23 下午   0:00.00 egrep (cron|syslog)
</code></pre>
<p>把所有进程显示出来，并输出到 ps001.txt 文件</p>
<pre><code class="language-Shell">ps -aux &gt; ps001.txt
</code></pre>
<p>输出指定的字段</p>

          </div>
        </article>
        <div class="next-post">
          <div class="next">下一篇</div>
          <a href="https://dev-coco.github.io/post/rsync/">
            <h3 class="post-title">rsync</h3>
          </a>
        </div>
        <div id="disqus_thread"></div>
        <div id="gitalk-container"></div>
      </div>
      <!-- middle -->
      <div class="main-container-middle"></div>
      <!-- right -->
      <div id="sidebar" class="main-container-right">
        <div class="id_card i-card">
          <div class="id_card-avatar" style="background-image: url(https://dev-coco.github.io/images/avatar.png?v=1666838133513)"></div>
          <h1 class="id_card-title">Raz1ner</h1>
          <img style="margin-top: 15px;margin-bottom: 10px;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdev-coco.github.io&amp;count_bg=%2310C1F9&amp;title_bg=%23555555&amp;icon=html5.svg&amp;icon_color=%23E7E7E7&amp;title=%E8%AE%BF%E9%97%AE%E4%BA%BA%E6%95%B0&amp;edge_flat=false">
          <p style="text-align: center;">
            <a href="https://github.com/dev-coco" target="_blank"><img class="social-icon" src="/images/social/GitHub.png"></a>
            <a href="https://t.me/raz1ner" target="_blank"><img class="social-icon" src="/images/social/Telegram.png"></a>
            <a href="https://www.youtube.com/channel/UCEgNinV_DEntuv5Dm8Z_JvA?sub_confirmation=1" target="_blank"><img class="social-icon" src="/images/social/YouTube.png"></a>
            <a href="/atom.xml" target="_blank"><img class="social-icon" src="/images/social/RSS.png"></a>
            <a href="mailto:ruijingle@gmail.com" target="_blank"><img class="social-icon" src="/images/social/Gmail.png"></a>
          </p>
          <!-- <h2 class="id_card-description"></h2> -->
          <!--  -->
          <div class="id_card-sns">
            <!-- github -->
            
            <!-- twitter -->
            <!-- weibo -->
            <!-- facebook -->
          </div>
        </div>
      <!-- toc -->
      <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
          <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E">补充说明</a></li>
<li><a href="#%E8%AF%AD%E6%B3%95">语法</a></li>
<li><a href="#%E9%80%89%E9%A1%B9">选项</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B">实例</a></li>
</ul>
</li>
</ul>

          </div>
          <script>
            function locateCatelogList() {
              /*获取文章目录集合,可通过:header过滤器*/
              var alis = $('.post-content :header');
              /*获取侧边栏目录列表集合**/
              var sidebar_alis = $('.markdownIt-TOC a');
              /*获取滚动条到顶部的距离*/
              var scroll_height = $(window).scrollTop();
              for (var i = 0; i < alis.length; i++) {
                /*获取锚点集合中的元素分别到顶点的距离*/
                var a_height = $(alis[i]).offset().top;
                if (a_height < scroll_height) {
                  /*高亮显示*/
                  sidebar_alis.removeClass('on');
                  $(sidebar_alis[i]).addClass('on');
                }
              }
            }
            $(function() {
              /*绑定滚动事件 */
              $(window).bind('scroll', locateCatelogList);
              });
          </script>
        </div>
      <div class="notice-card i-card ">
        <div class="notice-title i-card-title">公告</div>
        <div class="notice-content">博客新开通 Telegram 频道：<a href="https://t.me/raz1ner" target="_blank" style="color: blue">瑞景乐的博客</a>，欢迎订阅，随时收到最新资讯。<br>商务合作请点击上方的邮箱与我联系。</div>
      </div>
      <div class="notice-card i-card "><div class="notice-title i-card-title"><a href="/tags/">标签</a></div>
        <div class="notice-content">
          <a class="tags-tag i-tag i-tag-" href="https://dev-coco.github.io/tag/javascript/">Javascript</a>
          <a class="tags-tag i-tag i-tag-info" href="https://dev-coco.github.io/tag/google-script/">Google 脚本</a>
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/sololearn/">Sololearn</a>
          <a class="tags-tag i-tag i-tag-primary" href="https://dev-coco.github.io/tag/macos/">macOS</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/other/">其它</a>
          <a class="tags-tag i-tag i-tag-other_4" href="https://dev-coco.github.io/tag/whatsapp/">WhatsApp</a>
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/facebook/">Facebook</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/shell/">Shell</a>
          <a class="tags-tag i-tag i-tag-warning" href="https://dev-coco.github.io/tag/software/">软件</a>
          <a class="tags-tag i-tag i-tag-" href="https://dev-coco.github.io/tag/security/">安全</a>
          <a class="tags-tag i-tag i-tag-info" href="https://dev-coco.github.io/tag/excel/">Excel</a>
          <a class="tags-tag i-tag i-tag-primary" href="https://dev-coco.github.io/tag/windows/">Windows</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/ios/">iOS</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/linux-command/">Linux命令</a>
        </div>
      </div>
      </div>
    </div>
    <div class="site-footer">
    <span>Copyright © 2020-2022 Raz1ner - All Rights Reserved.</span> | <a class="rss" href="https://dev-coco.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
  <script>
    $('#sidebar').stickySidebar({
    topSpacing: 80,
    // bottomSpacing: 60
    });
  </script>
  
</body>
</html>