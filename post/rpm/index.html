<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>rpm | Raz1ner</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://dev-coco.github.io/favicon.ico?v=1676058158733">
<link rel="stylesheet" href="https://dev-coco.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="RPM 软件包的管理工具。

补充说明
rpm 命令是 RPM 软件包的管理工具。rpm 原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他..." />
    <meta name="keywords" content="Linux命令" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://dev-coco.github.io">
        <img src="https://dev-coco.github.io/images/avatar.png?v=1676058158733" class="site-logo">
        <h1 class="site-title">Raz1ner</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/Featured-Software.html" class="site-nav">
            软件
          </a>
        
      
        
          <a href="/Online-Tools" class="site-nav">
            在线工具
          </a>
        
      
        
          <a href="/post/Linux-Command" class="site-nav">
            Linux命令
          </a>
        
      
        
          <a href="/Excel" class="site-nav">
            Excel教程
          </a>
        
      
        
          <a href="/post/Terms-and-Privacy" class="site-nav">
            隐私与条款
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/dev-coco" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      
    </div>
    <div class="site-footer">
      <span>Copyright © 2020-2023 Raz1ner - All Rights Reserved.</span> | <a class="rss" href="https://dev-coco.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">rpm</h2>
            <div class="post-date">2022-02-02</div>
            
              <div class="feature-container" style="background-image: url('https://dev-coco.github.io/post-images/Linux-Command.png')">
              </div>
            
            <div class="post-content" v-pre>
              <p>RPM 软件包的管理工具。</p>
<!-- more -->
<h2 id="补充说明">补充说明</h2>
<p>rpm 命令是 RPM 软件包的管理工具。rpm 原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM 套件管理方式的出现，让 Linux 易于安装，升级，间接提升了 Linux 的适用度。</p>
<h2 id="语法">语法</h2>
<pre><code class="language-Shell">rpm (选项) (参数)
</code></pre>
<h2 id="选项">选项</h2>
<pre><code class="language-Shell">-a：查询所有套件；
-b&lt;完成阶段&gt;&lt;套件档&gt;+或-t &lt;完成阶段&gt;&lt;套件档&gt;+：设置包装套件的完成阶段，并指定套件档的文件名称；
-c：只列出组态配置文件，本参数需配合&quot;-l&quot;参数使用；
-d：只列出文本文件，本参数需配合&quot;-l&quot;参数使用；
-e&lt;套件档&gt;或--erase&lt;套件档&gt;：删除指定的套件；
-f&lt;文件&gt;+：查询拥有指定文件的套件；
-h 或--hash：套件安装时列出标记；
-i：显示套件的相关信息；
-i&lt;套件档&gt;或--install&lt;套件档&gt;：安装指定的套件档；
-l：显示套件的文件列表；
-p&lt;套件档&gt;+：查询指定的 RPM 套件档；
-q：使用询问模式，当遇到任何问题时，rpm 指令会先询问用户；
-R：显示套件的关联性信息；
-s：显示文件状态，本参数需配合&quot;-l&quot;参数使用；
-U&lt;套件档&gt;或--upgrade&lt;套件档&gt;：升级指定的套件档；
-v：显示指令执行过程；
-vv：详细显示指令执行过程，便于排错。
</code></pre>
<h2 id="参数">参数</h2>
<p>软件包：指定要操纵的 rpm 软件包。</p>
<h2 id="实例">实例</h2>
<p>如何安装 rpm 软件包</p>
<p>rpm 软件包的安装可以使用程序 rpm 来完成。执行下面的命令：</p>
<pre><code class="language-Shell">rpm -ivh your-package.rpm
</code></pre>
<p>其中 your-package.rpm 是你要安装的 rpm 包的文件名，一般置于当前目录下。</p>
<p>安装过程中可能出现下面的警告或者提示：</p>
<pre><code class="language-Shell">... conflict with ...
</code></pre>
<p>可能是要安装的包里有一些文件可能会覆盖现有的文件，缺省时这样的情况下是无法正确安装的可以用<code>rpm --force -i</code>强制安装即可</p>
<pre><code class="language-Shell">... is needed by ...
... is not installed ...
</code></pre>
<p>此包需要的一些软件你没有安装可以用<code>rpm --nodeps -i</code>来忽略此信息，也就是说<code>rpm -i --force --nodeps</code>可以忽略所有依赖关系和文件问题，什么包都能安装上，但这种强制安装的软件包不能保证完全发挥功能。</p>
<p>如何安装.src.rpm 软件包</p>
<p>有些软件包是以.src.rpm 结尾的，这类软件包是包含了源代码的 rpm 包，在安装时需要进行编译。这类软件包有两种安装方法：</p>
<p>方法一：</p>
<pre><code class="language-Shell">rpm -i your-package.src.rpm
cd /usr/src/redhat/SPECS
rpmbuild -bp your-package.specs             #一个和你的软件包同名的 specs 文件
cd /usr/src/redhat/BUILD/your-package/      #一个和你的软件包同名的目录
./configure                                 #这一步和编译普通的源码软件一样，可以加上参数
make
make install
</code></pre>
<p>方法二：</p>
<pre><code class="language-Shell">rpm -i you-package.src.rpm
cd /usr/src/redhat/SPECS
</code></pre>
<p>前两步和方法一相同</p>
<pre><code class="language-Shell">rpmbuild -bb your-package.specs       #一个和你的软件包同名的 specs 文件
</code></pre>
<p>这时在<code>/usr/src/redhat/RPM/i386/</code>（根据具体包的不同，也可能是 i686,noarch 等等）在这个目录下，有一个新的 rpm 包，这个是编译好的二进制文件。</p>
<p>执行<code>rpm -i new-package.rpm</code>即可安装完成。</p>
<p>如何卸载 rpm 软件包</p>
<p>使用命令<code>rpm -e</code>包名，包名可以包含版本号等信息，但是不可以有后缀.rpm，比如卸载软件包 proftpd-1.2.8-1，可以使用下列格式：</p>
<pre><code class="language-Shell">rpm -e proftpd-1.2.8-1
rpm -e proftpd-1.2.8
rpm -e proftpd-
rpm -e proftpd
</code></pre>
<p>不可以是下列格式：</p>
<pre><code class="language-Shell">rpm -e proftpd-1.2.8-1.i386.rpm
rpm -e proftpd-1.2.8-1.i386
rpm -e proftpd-1.2
rpm -e proftpd-1
</code></pre>
<p>有时会出现一些错误或者警告：</p>
<pre><code class="language-Shell">... is needed by ...
</code></pre>
<p>这说明这个软件被其他软件需要，不能随便卸载，可以用 rpm -e --nodeps 强制卸载</p>
<p>如何不安装但是获取 rpm 包中的文件</p>
<p>使用工具 rpm2cpio 和 cpio</p>
<pre><code class="language-Shell">rpm2cpio xxx.rpm | cpio -vi
rpm2cpio xxx.rpm | cpio -idmv
rpm2cpio xxx.rpm | cpio --extract --make-directories
</code></pre>
<p>参数 i 和 extract 相同，表示提取文件。v 表示指示执行进程，d 和 make-directory 相同，表示根据包中文件原来的路径建立目录，m 表示保持文件的更新时间。</p>
<p>如何查看与 rpm 包相关的文件和其他信息</p>
<p>下面所有的例子都假设使用软件包 mysql-3.23.54a-11</p>
<p>1、我的系统中安装了那些 rpm 软件包。</p>
<pre><code class="language-Shell">rpm -qa 讲列出所有安装过的包
</code></pre>
<p>如果要查找所有安装过的包含某个字符串 sql 的软件包</p>
<pre><code class="language-Shell">rpm -qa | grep sql
</code></pre>
<p>2、如何获得某个软件包的文件全名。</p>
<pre><code class="language-Shell">rpm -q mysql
</code></pre>
<p>可以获得系统中安装的 mysql 软件包全名，从中可以获得当前软件包的版本等信息。这个例子中可以得到信息 mysql-3.23.54a-11</p>
<p>3、一个 rpm 包中的文件安装到那里去了？</p>
<pre><code class="language-Shell">rpm -ql 包名
</code></pre>
<p>注意这里的是不包括.rpm 后缀的软件包的名称，也就是说只能用 mysql 或者 mysql-3.23.54a-11 而不是 mysql-3.23.54a-11.rpm。如果只是想知道可执行程序放到那里去了，也可以用 which，比如：</p>
<pre><code class="language-Shell">which mysql
</code></pre>
<p>4、一个 rpm 包中包含那些文件。</p>
<ul>
<li>
<p>一个没有安装过的软件包，使用<code>rpm -qlp **** .rpm</code></p>
</li>
<li>
<p>一个已经安装过的软件包，还可以使用<code>rpm -ql **** .rpm</code></p>
</li>
</ul>
<p>5、如何获取关于一个软件包的版本，用途等相关信息？</p>
<ul>
<li>
<p>一个没有安装过的软件包，使用<code>rpm -qip **** .rpm</code></p>
</li>
<li>
<p>一个已经安装过的软件包，还可以使用<code>rpm -qi **** .rpm</code></p>
</li>
</ul>
<p>6、某个程序是哪个软件包安装的，或者哪个软件包包含这个程序。</p>
<pre><code class="language-Shell">rpm -qf `which 程序名`    #返回软件包的全名
rpm -qif `which 程序名`   #返回软件包的有关信息
rpm -qlf `which 程序名`   #返回软件包的文件列表
</code></pre>
<p>注意，这里不是引号，而是<code>，就是键盘左上角的那个键。也可以使用</code>rpm -qilf`，同时输出软件包信息和文件列表。</p>
<p>7、某个文件是哪个软件包安装的，或者哪个软件包包含这个文件。</p>
<p>注意，前一个问题中的方法，只适用与可执行的程序，而下面的方法，不仅可以用于可执行程序，也可以用于普通的任何文件。前提是知道这个文件名。首先获得这个程序的完整路径，可以用 whereis 或者 which，然后使用<code>rpm -qf</code>例如：</p>
<pre><code class="language-Shell">whereis ftptop
ftptop: /usr/bin/ftptop /usr/share/man/man1/ftptop.1.gz

rpm -qf /usr/bin/ftptop
proftpd-1.2.8-1

rpm -qf /usr/share/doc/proftpd-1.2.8/rfc/rfc0959.txt
proftpd-1.2.8-1
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://dev-coco.github.io/tag/linux-command/" class="tag">
                    Linux命令
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://dev-coco.github.io/post/quota/">
                  <h3 class="post-title">
                    quota
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
