<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rpm | Raz1ner</title>
  <link rel="shortcut icon" href="https://dev-coco.github.io/favicon.ico?v=1657461308177">
  <link rel="stylesheet" href="https://dev-coco.github.io/styles/main.css">
  <script src="https://dev-coco.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script data-ad-client="ca-pub-6960947409660270" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
  <div class="main">
    <div class="header">
      <div class="nav">
        <div class="logo">
          <a href="https://dev-coco.github.io">
            <img class="avatar" src="https://dev-coco.github.io/images/avatar.png?v=1657461308177" alt="">
          </a>
          <div class="site-title">
            <h1>Raz1ner</h1>
          </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
          <ul>
            <li>
              <a href="/" class="menu">首页</a>
            </li>
            <li>
              <a href="/Featured-Software.html" class="menu">软件</a>
            </li>
            <li>
              <a href="/Online-Tools" class="menu">在线工具</a>
            </li>
            <li>
              <a href="/post/Linux-Command" class="menu">Linux命令</a>
            </li>
            <li>
              <a href="/Excel" class="menu">Excel教程</a>
            </li>
            <li>
              <a href="/post/Terms-and-Privacy" class="menu">隐私与条款</a>
            </li>
          </ul>
        </div>
        <form id="gridea-search-form" action="https://dev-coco.github.io/search/" class="search">
          <input type="search" name="q" class="search-box">
          <span class="search-button">
            <span class="search-icon"></span>
          </span>
        </form>
      </div>
    </div>
    <script>
      document.getElementsByClassName('search-button')[0].addEventListener('click', function () {
        document.getElementById('gridea-search-form').classList.toggle('open');
      })
    </script>

    <div id="main-content" class="post-detail main-container">
      <!-- left -->
      <div id="content" class="main-container-left">
        <article class="post i-card">
        <h2 class="post-title">rpm</h2>
        <div class="post-info">
          <time class="post-time">2022-02-03 / 7 min read</time>
            <a href="https://dev-coco.github.io/tag/linux-command/" class="post-tag i-tag i-tag-other_3">#Linux命令</a>
        </div>
          <div class="post-content">
            <p>RPM 软件包的管理工具。</p>
<!-- more -->
<h2 id="补充说明">补充说明</h2>
<p>rpm 命令是 RPM 软件包的管理工具。rpm 原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM 套件管理方式的出现，让 Linux 易于安装，升级，间接提升了 Linux 的适用度。</p>
<h2 id="语法">语法</h2>
<pre><code class="language-Shell">rpm (选项) (参数)
</code></pre>
<h2 id="选项">选项</h2>
<pre><code class="language-Shell">-a：查询所有套件；
-b&lt;完成阶段&gt;&lt;套件档&gt;+或-t &lt;完成阶段&gt;&lt;套件档&gt;+：设置包装套件的完成阶段，并指定套件档的文件名称；
-c：只列出组态配置文件，本参数需配合&quot;-l&quot;参数使用；
-d：只列出文本文件，本参数需配合&quot;-l&quot;参数使用；
-e&lt;套件档&gt;或--erase&lt;套件档&gt;：删除指定的套件；
-f&lt;文件&gt;+：查询拥有指定文件的套件；
-h 或--hash：套件安装时列出标记；
-i：显示套件的相关信息；
-i&lt;套件档&gt;或--install&lt;套件档&gt;：安装指定的套件档；
-l：显示套件的文件列表；
-p&lt;套件档&gt;+：查询指定的 RPM 套件档；
-q：使用询问模式，当遇到任何问题时，rpm 指令会先询问用户；
-R：显示套件的关联性信息；
-s：显示文件状态，本参数需配合&quot;-l&quot;参数使用；
-U&lt;套件档&gt;或--upgrade&lt;套件档&gt;：升级指定的套件档；
-v：显示指令执行过程；
-vv：详细显示指令执行过程，便于排错。
</code></pre>
<h2 id="参数">参数</h2>
<p>软件包：指定要操纵的 rpm 软件包。</p>
<h2 id="实例">实例</h2>
<p>如何安装 rpm 软件包</p>
<p>rpm 软件包的安装可以使用程序 rpm 来完成。执行下面的命令：</p>
<pre><code class="language-Shell">rpm -ivh your-package.rpm
</code></pre>
<p>其中 your-package.rpm 是你要安装的 rpm 包的文件名，一般置于当前目录下。</p>
<p>安装过程中可能出现下面的警告或者提示：</p>
<pre><code class="language-Shell">... conflict with ...
</code></pre>
<p>可能是要安装的包里有一些文件可能会覆盖现有的文件，缺省时这样的情况下是无法正确安装的可以用<code>rpm --force -i</code>强制安装即可</p>
<pre><code class="language-Shell">... is needed by ...
... is not installed ...
</code></pre>
<p>此包需要的一些软件你没有安装可以用<code>rpm --nodeps -i</code>来忽略此信息，也就是说<code>rpm -i --force --nodeps</code>可以忽略所有依赖关系和文件问题，什么包都能安装上，但这种强制安装的软件包不能保证完全发挥功能。</p>
<p>如何安装.src.rpm 软件包</p>
<p>有些软件包是以.src.rpm 结尾的，这类软件包是包含了源代码的 rpm 包，在安装时需要进行编译。这类软件包有两种安装方法：</p>
<p>方法一：</p>
<pre><code class="language-Shell">rpm -i your-package.src.rpm
cd /usr/src/redhat/SPECS
rpmbuild -bp your-package.specs             #一个和你的软件包同名的 specs 文件
cd /usr/src/redhat/BUILD/your-package/      #一个和你的软件包同名的目录
./configure                                 #这一步和编译普通的源码软件一样，可以加上参数
make
make install
</code></pre>
<p>方法二：</p>
<pre><code class="language-Shell">rpm -i you-package.src.rpm
cd /usr/src/redhat/SPECS
</code></pre>
<p>前两步和方法一相同</p>
<pre><code class="language-Shell">rpmbuild -bb your-package.specs       #一个和你的软件包同名的 specs 文件
</code></pre>
<p>这时在<code>/usr/src/redhat/RPM/i386/</code>（根据具体包的不同，也可能是 i686,noarch 等等）在这个目录下，有一个新的 rpm 包，这个是编译好的二进制文件。</p>
<p>执行<code>rpm -i new-package.rpm</code>即可安装完成。</p>
<p>如何卸载 rpm 软件包</p>
<p>使用命令<code>rpm -e</code>包名，包名可以包含版本号等信息，但是不可以有后缀.rpm，比如卸载软件包 proftpd-1.2.8-1，可以使用下列格式：</p>
<pre><code class="language-Shell">rpm -e proftpd-1.2.8-1
rpm -e proftpd-1.2.8
rpm -e proftpd-
rpm -e proftpd
</code></pre>
<p>不可以是下列格式：</p>
<pre><code class="language-Shell">rpm -e proftpd-1.2.8-1.i386.rpm
rpm -e proftpd-1.2.8-1.i386
rpm -e proftpd-1.2
rpm -e proftpd-1
</code></pre>
<p>有时会出现一些错误或者警告：</p>
<pre><code class="language-Shell">... is needed by ...
</code></pre>
<p>这说明这个软件被其他软件需要，不能随便卸载，可以用 rpm -e --nodeps 强制卸载</p>
<p>如何不安装但是获取 rpm 包中的文件</p>
<p>使用工具 rpm2cpio 和 cpio</p>
<pre><code class="language-Shell">rpm2cpio xxx.rpm | cpio -vi
rpm2cpio xxx.rpm | cpio -idmv
rpm2cpio xxx.rpm | cpio --extract --make-directories
</code></pre>
<p>参数 i 和 extract 相同，表示提取文件。v 表示指示执行进程，d 和 make-directory 相同，表示根据包中文件原来的路径建立目录，m 表示保持文件的更新时间。</p>
<p>如何查看与 rpm 包相关的文件和其他信息</p>
<p>下面所有的例子都假设使用软件包 mysql-3.23.54a-11</p>
<p>1、我的系统中安装了那些 rpm 软件包。</p>
<pre><code class="language-Shell">rpm -qa 讲列出所有安装过的包
</code></pre>
<p>如果要查找所有安装过的包含某个字符串 sql 的软件包</p>
<pre><code class="language-Shell">rpm -qa | grep sql
</code></pre>
<p>2、如何获得某个软件包的文件全名。</p>
<pre><code class="language-Shell">rpm -q mysql
</code></pre>
<p>可以获得系统中安装的 mysql 软件包全名，从中可以获得当前软件包的版本等信息。这个例子中可以得到信息 mysql-3.23.54a-11</p>
<p>3、一个 rpm 包中的文件安装到那里去了？</p>
<pre><code class="language-Shell">rpm -ql 包名
</code></pre>
<p>注意这里的是不包括.rpm 后缀的软件包的名称，也就是说只能用 mysql 或者 mysql-3.23.54a-11 而不是 mysql-3.23.54a-11.rpm。如果只是想知道可执行程序放到那里去了，也可以用 which，比如：</p>
<pre><code class="language-Shell">which mysql
</code></pre>
<p>4、一个 rpm 包中包含那些文件。</p>
<ul>
<li>
<p>一个没有安装过的软件包，使用<code>rpm -qlp **** .rpm</code></p>
</li>
<li>
<p>一个已经安装过的软件包，还可以使用<code>rpm -ql **** .rpm</code></p>
</li>
</ul>
<p>5、如何获取关于一个软件包的版本，用途等相关信息？</p>
<ul>
<li>
<p>一个没有安装过的软件包，使用<code>rpm -qip **** .rpm</code></p>
</li>
<li>
<p>一个已经安装过的软件包，还可以使用<code>rpm -qi **** .rpm</code></p>
</li>
</ul>
<p>6、某个程序是哪个软件包安装的，或者哪个软件包包含这个程序。</p>
<pre><code class="language-Shell">rpm -qf `which 程序名`    #返回软件包的全名
rpm -qif `which 程序名`   #返回软件包的有关信息
rpm -qlf `which 程序名`   #返回软件包的文件列表
</code></pre>
<p>注意，这里不是引号，而是<code>，就是键盘左上角的那个键。也可以使用</code>rpm -qilf`，同时输出软件包信息和文件列表。</p>
<p>7、某个文件是哪个软件包安装的，或者哪个软件包包含这个文件。</p>
<p>注意，前一个问题中的方法，只适用与可执行的程序，而下面的方法，不仅可以用于可执行程序，也可以用于普通的任何文件。前提是知道这个文件名。首先获得这个程序的完整路径，可以用 whereis 或者 which，然后使用<code>rpm -qf</code>例如：</p>
<pre><code class="language-Shell">whereis ftptop
ftptop: /usr/bin/ftptop /usr/share/man/man1/ftptop.1.gz

rpm -qf /usr/bin/ftptop
proftpd-1.2.8-1

rpm -qf /usr/share/doc/proftpd-1.2.8/rfc/rfc0959.txt
proftpd-1.2.8-1
</code></pre>

          </div>
        </article>
        <div class="next-post">
          <div class="next">下一篇</div>
          <a href="https://dev-coco.github.io/post/sort/">
            <h3 class="post-title">sort</h3>
          </a>
        </div>
        <div id="disqus_thread"></div>
        <div id="gitalk-container"></div>
      </div>
      <!-- middle -->
      <div class="main-container-middle"></div>
      <!-- right -->
      <div id="sidebar" class="main-container-right">
        <div class="id_card i-card">
          <div class="id_card-avatar" style="background-image: url(https://dev-coco.github.io/images/avatar.png?v=1657461308177)"></div>
          <h1 class="id_card-title">Raz1ner</h1>
          <img style="margin-top: 15px;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdev-coco.github.io&amp;count_bg=%2310C1F9&amp;title_bg=%23555555&amp;icon=html5.svg&amp;icon_color=%23E7E7E7&amp;title=%E8%AE%BF%E9%97%AE%E4%BA%BA%E6%95%B0&amp;edge_flat=false">
          <!-- <h2 class="id_card-description"></h2> -->
          <!--  -->
          <div class="id_card-sns">
            <!-- github -->
            
            <!-- twitter -->
            <!-- weibo -->
            <!-- facebook -->
          </div>
        </div>
      <!-- toc -->
      <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
          <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E">补充说明</a></li>
<li><a href="#%E8%AF%AD%E6%B3%95">语法</a></li>
<li><a href="#%E9%80%89%E9%A1%B9">选项</a></li>
<li><a href="#%E5%8F%82%E6%95%B0">参数</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B">实例</a></li>
</ul>
</li>
</ul>

          </div>
          <script>
            function locateCatelogList() {
              /*获取文章目录集合,可通过:header过滤器*/
              var alis = $('.post-content :header');
              /*获取侧边栏目录列表集合**/
              var sidebar_alis = $('.markdownIt-TOC a');
              /*获取滚动条到顶部的距离*/
              var scroll_height = $(window).scrollTop();
              for (var i = 0; i < alis.length; i++) {
                /*获取锚点集合中的元素分别到顶点的距离*/
                var a_height = $(alis[i]).offset().top;
                if (a_height < scroll_height) {
                  /*高亮显示*/
                  sidebar_alis.removeClass('on');
                  $(sidebar_alis[i]).addClass('on');
                }
              }
            }
            $(function() {
              /*绑定滚动事件 */
              $(window).bind('scroll', locateCatelogList);
              });
          </script>
        </div>
      <div class="notice-card i-card ">
        <div class="notice-title i-card-title">公告</div>
        <div class="notice-content">博客新增搜索文章功能。<br>输入关键词后按回车键即可。</div>
      </div>
      <div class="notice-card i-card "><div class="notice-title i-card-title"><a href="/tags/">标签</a></div>
        <div class="notice-content">
          <a class="tags-tag i-tag i-tag-info" href="https://dev-coco.github.io/tag/google-script/">Google 脚本</a>
          <a class="tags-tag i-tag i-tag-banana" href="https://dev-coco.github.io/tag/other/">其它</a>
          <a class="tags-tag i-tag i-tag-primary" href="https://dev-coco.github.io/tag/javascript/">Javascript</a>
          <a class="tags-tag i-tag i-tag-other_1" href="https://dev-coco.github.io/tag/macos/">macOS</a>
          <a class="tags-tag i-tag i-tag-info" href="https://dev-coco.github.io/tag/software/">软件</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/excel/">Excel</a>
          <a class="tags-tag i-tag i-tag-success" href="https://dev-coco.github.io/tag/whatsapp/">WhatsApp</a>
          <a class="tags-tag i-tag i-tag-warning" href="https://dev-coco.github.io/tag/facebook/">Facebook</a>
          <a class="tags-tag i-tag i-tag-error" href="https://dev-coco.github.io/tag/windows/">Windows</a>
          <a class="tags-tag i-tag i-tag-other_3" href="https://dev-coco.github.io/tag/ios/">iOS</a>
          <a class="tags-tag i-tag i-tag-other_2" href="https://dev-coco.github.io/tag/shell/">Shell</a>
          <a class="tags-tag i-tag i-tag-" href="https://dev-coco.github.io/tag/linux-command/">Linux命令</a>
        </div>
      </div>
      </div>
    </div>
    <div class="site-footer">
    <span>Copyright © 2020-2022 Raz1ner - All Rights Reserved.</span> | <a class="rss" href="https://dev-coco.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
  <script>
    $('#sidebar').stickySidebar({
    topSpacing: 80,
    // bottomSpacing: 60
    });
  </script>
  
</body>
</html>